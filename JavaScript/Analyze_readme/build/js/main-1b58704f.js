// main.js
function callAlgorithm(){var e=document.getElementById("status-label");e.innerHTML="",startTask();var t=document.getElementById("repository").value;t=t.trim(),e.innerHTML="",Algorithmia.query("nlp/AnalyzeGithubReadme",Algorithmia.api_key,t,function(t,n){finishTask();if(t){e.innerHTML='<span class="text-danger">Failed:('+t+")</span>";return}parseScores(n),parseRecommendations(n)})}function parseRecommendations(e){updateLengthRecommendation(e.recommendation.length,e.score.length),updateCodeSampleRecommendation(e.recommendation.pre,e.score.pre),updateImagesRecommendation(e.recommendation.img,e.score.img),insertHeadersRecommendations(e.recommendation.header,e.score.header),insertParagraphRecommendations(e.recommendation.paragraph,e.score.paragraph)}function insertHeadersRecommendations(e,t){var n=document.getElementById("header-rec-operation"),r=document.getElementById("header-rec-value");n.innerHTML="",r.innerHTML="";var s=document.createElement("span");t>=6?(s.className="glyphicon glyphicon-ok text-success",r.innerHTML="Amazing! Your README header score is "+t+" out of 10."):t==4||t==5?(s.className="glyphicon glyphicon-ok text-default",r.innerHTML="Your README header score is "+t+" out of 10. There's always room for improvement."):t==3||t==2||t==1?(s.className="glyphicon glyphicon-remove text-default",r.innerHTML="Uh oh. Your README header score is "+t+" out of 10."):(s.className="glyphicon glyphicon-ok text-default",r.innerHTML="Your README header score is "+t+" out of 10."),n.appendChild(s);var o=document.getElementById("headers-recommendation-list");o.innerHTML="";var u=e,a=[],f=[];for(i=0;i<u.length;++i){var l=u[i].operation,c=u[i].value;l=="insert"?a.push(c):f.push(c)}var h=document.createElement("div");h.className="col-md-5 col-md-offset-1";var p=document.createElement("div");p.className="panel panel-default";var d=document.createElement("div");d.className="panel-heading",d.innerHTML="<h3 class='panel-title'>Consider Adding:</h3>",h.appendChild(p),p.appendChild(d);if(a.length>0){var v=document.createElement("div");v.className="panel-body",v.innerHTML="<p>Your README could be improved by adding these sections:</p>"}else{var v=document.createElement("div");v.className="panel-body",v.innerHTML="<p>Awesome! Your README has all the preferred sections.</p>"}for(i=0;i<a.length;i++)if(i<6){var m=document.createElement("span");m.className="label label-success",m.innerHTML=a[i];var g=document.createTextNode(" ");v.appendChild(m),v.appendChild(g)}p.appendChild(v),o.appendChild(h);var h=document.createElement("div");h.className="col-md-5";var p=document.createElement("div");p.className="panel panel-default";var d=document.createElement("div");d.className="panel-heading",d.innerHTML="<h3 class='panel-title'>Try Removing:</h3>",h.appendChild(p),p.appendChild(d);if(f.length>0){var v=document.createElement("div");v.className="panel-body",v.innerHTML="<p>Popular README's typically don't have these sections:</p>"}else{var v=document.createElement("div");v.className="panel-body",t>=4?v.innerHTML="<p>Nice! No sections to remove.</p>":v.innerHTML="<p>No recommendations to make.</p>"}for(i=0;i<f.length;i++)if(i<6){var m=document.createElement("span");m.className="label label-danger",m.innerHTML=f[i];var g=document.createTextNode(" ");v.appendChild(m),v.appendChild(g)}p.appendChild(v),o.appendChild(h),console.log(a),console.log(f)}function insertParagraphRecommendations(e,t){var n=document.getElementById("paragraph-rec-operation"),r=document.getElementById("paragraph-rec-value");n.innerHTML="",r.innerHTML="";var s=document.createElement("span");t>=6?(s.className="glyphicon glyphicon-ok text-success",r.innerHTML="Amazing! Your README text score is "+t+" out of 10."):t==4||t==5?(s.className="glyphicon glyphicon-ok text-default",r.innerHTML="Your README text score is "+t+" out of 10. There's always room for improvement."):t==3||t==2||t==1?(s.className="glyphicon glyphicon-remove text-default",r.innerHTML="Uh oh. Your README text score is "+t+" out of 10."):(s.className="glyphicon glyphicon-ok text-default",r.innerHTML="Your README text score is "+t+" out of 10."),n.appendChild(s);var o=document.getElementById("paragraphs-recommendation-list");o.innerHTML="";var u=e,a=[],f=[];for(i=0;i<u.length;++i){var l=u[i].operation,c=u[i].value;l=="insert"?a.push(c):f.push(c)}var h=document.createElement("div");h.className="col-md-5 col-md-offset-1";var p=document.createElement("div");p.className="panel panel-default";var d=document.createElement("div");d.className="panel-heading",d.innerHTML="<h3 class='panel-title'>Consider Adding</h3>",h.appendChild(p),p.appendChild(d);if(a.length>0){var v=document.createElement("div");v.className="panel-body",v.innerHTML="<p>Popular README's tend to use more of these words:</p>"}else{var v=document.createElement("div");v.className="panel-body",v.innerHTML="<p>Nice! Nothing to add.</p>"}for(i=0;i<a.length;i++)if(i<6){var m=document.createElement("span");m.className="label label-success",m.innerHTML=a[i];var g=document.createTextNode(" ");v.appendChild(m),v.appendChild(g)}p.appendChild(v),o.appendChild(h);var h=document.createElement("div");h.className="col-md-5";var p=document.createElement("div");p.className="panel panel-default";var d=document.createElement("div");d.className="panel-heading",d.innerHTML="<h3 class='panel-title'>Try Removing</h3>",h.appendChild(p),p.appendChild(d);if(f.length>0){var v=document.createElement("div");v.className="panel-body",v.innerHTML="<p>These words aren't typically found in popular README's:</p>"}else{var v=document.createElement("div");v.className="panel-body",t>=4?v.innerHTML="<p>Nice! No sections to remove.</p>":v.innerHTML="<p>No recommendations to make.</p>"}for(i=0;i<f.length;i++)if(i<6){var m=document.createElement("span");m.className="label label-danger",m.innerHTML=f[i];var g=document.createTextNode(" ");v.appendChild(m),v.appendChild(g)}p.appendChild(v),o.appendChild(h)}function updateLengthRecommendation(e,t){var n=document.getElementById("length-recommendation-operation"),r=document.getElementById("length-recommendation-value");n.innerHTML="",r.innerHTML="";var i=document.createElement("span");if(t>=6)if(e.length==0)i.className="glyphicon glyphicon-ok text-success",r.innerHTML="Amazing! Your README scored "+t+" out of 10 on character count. We have no recommendations to make.";else if(e[0].operation=="decrease"){i.className="glyphicon glyphicon-ok text-default";var s="Excellent. Your README scored "+t+" out of 10 on character count. Want to improve even more? Try removing up to "+e[0].value+" characters.";r.innerHTML=s}else if(e[0].operation=="increase"){i.className="glyphicon glyphicon-ok text-default";var s="Very nice. Your README scored "+t+" out of 10 on character count. Want to do better? Consider adding "+e[0].value+" or more characters to improve your score.";r.innerHTML=s}else i.className="glyphicon glyphicon-ok text-default",r.innerHTML="No recommendations found for your README's character count. Good job!";else if(t==4||t==5)if(e.length==0)i.className="glyphicon glyphicon-ok text-default",r.innerHTML="Your README scored "+t+" out of 10 on character count. There's always room for improvement, but we don't have a suggestion.";else if(e[0].operation=="decrease"){i.className="glyphicon glyphicon-ok text-default";var s="Your README scored "+t+" out of 10 on character count. Consider removing up to "+e[0].value+" characters to improve your score.";r.innerHTML=s}else if(e[0].operation=="increase"){i.className="glyphicon glyphicon-ok text-default";var s="Your README scored "+t+" out of 10 on character count. Try adding "+e[0].value+" or more characters to improve your score.";r.innerHTML=s}else i.className="glyphicon glyphicon-ok text-default",r.innerHTML="No recommendations found for your README's character count.";else if(t==3||t==2||t==1)if(e.length==0)i.className="glyphicon glyphicon-remove text-default",r.innerHTML="Uh oh. Your README scored "+t+" out of 10 on character count. That's pretty low, but we don't have a suggestion for improvement.";else if(e[0].operation=="decrease"){i.className="glyphicon glyphicon-remove text-default";var s="Woah! Your README scored "+t+" out of 10 on character count. Consider removing up to "+e[0].value+" characters to improve your score.";r.innerHTML=s}else if(e[0].operation=="increase"){i.className="glyphicon glyphicon-remove text-default";var s="Yikes! Your README scored "+t+" out of 10 on character count. Try adding "+e[0].value+" or more characters to improve your score.";r.innerHTML=s}else i.className="glyphicon glyphicon-remove text-default",r.innerHTML="No recommendations found for your README's character count.";else i.className="glyphicon glyphicon-ok text-default",r.innerHTML="No recommendations found for your README's character count.";n.appendChild(i)}function updateCodeSampleRecommendation(e,t){var n=document.getElementById("code-recommendation-operation"),r=document.getElementById("code-recommendation-value");n.innerHTML="",r.innerHTML="";var i=document.createElement("span");if(t>=6)if(e.length==0)i.className="glyphicon glyphicon-ok text-success",r.innerHTML="Amazing! Your README scored "+t+" out of 10 on code samples. We have no recommendations to make.";else if(e[0].operation=="decrease"){i.className="glyphicon glyphicon-ok text-default";var s="Excellent. Your README scored "+t+" out of 10 on code samples. Want to improve even more? Try removing up to "+e[0].value+" code samples.";r.innerHTML=s}else if(e[0].operation=="increase"){i.className="glyphicon glyphicon-ok text-default";var s="Very nice. Your README scored "+t+" out of 10 on code samples. Want to do better? Consider adding "+e[0].value+" or more code samples to improve your score.";r.innerHTML=s}else i.className="glyphicon glyphicon-ok text-default",r.innerHTML="No recommendations found for your README's code samples count. Good job!";else if(t==4||t==5)if(e.length==0)i.className="glyphicon glyphicon-ok text-default",r.innerHTML="Your README scored "+t+" out of 10 on code samples. There's always room for improvement, but we don't have a suggestion.";else if(e[0].operation=="decrease"){i.className="glyphicon glyphicon-ok text-default";var s="Your README scored "+t+" out of 10 on code samples. Consider removing up to "+e[0].value+" code samples to improve your score.";r.innerHTML=s}else if(e[0].operation=="increase"){i.className="glyphicon glyphicon-ok text-default";var s="Your README scored "+t+" out of 10 on code samples. Try adding "+e[0].value+" or more code samples to improve your score.";r.innerHTML=s}else i.className="glyphicon glyphicon-ok text-default",r.innerHTML="No recommendations found for your README's code samples.";else if(t==3||t==2||t==1)if(e.length==0)i.className="glyphicon glyphicon-remove text-default",r.innerHTML="Uh oh. Your README scored "+t+" out of 10 on code samples. That's pretty low, but we don't have a suggestion for improvement.";else if(e[0].operation=="decrease"){i.className="glyphicon glyphicon-remove text-default";var s="Code overload! Your README scored "+t+" out of 10 on code samples. Consider removing up to "+e[0].value+" code samples to improve your score.";r.innerHTML=s}else if(e[0].operation=="increase"){i.className="glyphicon glyphicon-remove text-default";var s="Yikes! Your README scored "+t+" out of 10 on code samples. Try adding "+e[0].value+" or more code samples to improve your score.";r.innerHTML=s}else i.className="glyphicon glyphicon-remove text-default",r.innerHTML="No recommendations found for your README's code samples.";else i.className="glyphicon glyphicon-ok text-default",r.innerHTML="No recommendations found for your README's code samples.";n.appendChild(i)}function updateImagesRecommendation(e,t){var n=document.getElementById("images-recommendation-operation"),r=document.getElementById("images-recommendation-value");n.innerHTML="",r.innerHTML="";var i=document.createElement("span");if(t>=6)if(e.length==0)i.className="glyphicon glyphicon-ok text-success",r.innerHTML="Amazing! Your README image score is "+t+" out of 10. We have no recommendations to make.";else if(e[0].operation=="decrease"){i.className="glyphicon glyphicon-ok text-default";var s="Excellent. Your README image score is "+t+" out of 10. Want to improve even more? Try removing up to "+e[0].value+" images.";r.innerHTML=s}else if(e[0].operation=="increase"){i.className="glyphicon glyphicon-ok text-default";var s="Very nice. Your README image score is "+t+" out of 10. Want to do better? Consider adding "+e[0].value+" or more images to improve your score.";r.innerHTML=s}else i.className="glyphicon glyphicon-ok text-default",r.innerHTML="No recommendations found for your README's image count. Good job!";else if(t==4||t==5)if(e.length==0)i.className="glyphicon glyphicon-ok text-default",r.innerHTML="Your README image score is "+t+" out of 10. There's always room for improvement, but we don't have a suggestion.";else if(e[0].operation=="decrease"){i.className="glyphicon glyphicon-ok text-default";var s="Your README image score is "+t+" out of 10. Consider removing up to "+e[0].value+" images to improve your score.";r.innerHTML=s}else if(e[0].operation=="increase"){i.className="glyphicon glyphicon-ok text-default";var s="Your README image score is "+t+" out of 10. Try adding "+e[0].value+" or more images to improve your score.";r.innerHTML=s}else i.className="glyphicon glyphicon-ok text-default",r.innerHTML="No recommendations found for your README's image count.";else if(t==3||t==2||t==1)if(e.length==0)i.className="glyphicon glyphicon-remove text-default",r.innerHTML="Uh oh. Your README image score is "+t+" out of 10. That's pretty low, but we don't have a suggestion for improvement.";else if(e[0].operation=="decrease"){i.className="glyphicon glyphicon-remove text-default";var s="Image overload! Your README image score is "+t+" out of 10. Consider removing up to "+e[0].value+" images to improve your score.";r.innerHTML=s}else if(e[0].operation=="increase"){i.className="glyphicon glyphicon-remove text-default";var s="Yikes! Your README image score is "+t+" out of 10. Try adding "+e[0].value+" or more images to improve your score.";r.innerHTML=s}else i.className="glyphicon glyphicon-remove text-default",r.innerHTML="No recommendations found for your README's image count.";else i.className="glyphicon glyphicon-ok text-default",r.innerHTML="No recommendations found for your README's image count.";n.appendChild(i)}function parseScores(e){var t=document.getElementsByClassName("overview-score"),n=document.getElementsByClassName("length-score"),r=document.getElementsByClassName("headers-score"),i=document.getElementsByClassName("code-score"),s=document.getElementsByClassName("paragraph-score"),o=document.getElementsByClassName("image-score"),u=e.score,a=new Array(u.pre,u.header,u.length,u.paragraph,u.img),f=0;for(var l=0;l<a.length;l++)f+=parseInt(a[l],10);var c=Math.ceil(f/a.length);a.unshift(c);var h=new Array(t,i,r,n,s,o);console.log(h);for(var l in h)insertGrade(h[l],a[l])}function insertGrade(e,t){var n=e,t=t;for(i=0;i<n.length;++i){var r=n[i];t>=9?(r.style.color="#5cb85c",r.innerHTML="A+"):t==8?(r.style.color="#5cb85c",r.innerHTML="A"):t==7?(r.style.color="#5cb85c",r.innerHTML="B"):t==5||t==6?(r.style.color="#f0ad4e",r.innerHTML="C"):t==3||t==4?(r.style.color="#d9534f",r.innerHTML="D"):t==2||t==1?(r.style.color="#d9534f",r.innerHTML="F"):(r.style.color="#f0ad4e",r.innerHTML="C")}}function startTask(){numTasks++,document.getElementById("overlay").classList.remove("hidden")}function finishTask(){numTasks--,numTasks<=0&&(document.getElementById("overlay").classList.add("hidden"),document.getElementById("explainer").classList.add("hidden"),document.getElementById("recs").classList.remove("hidden"))}window.Algorithmia=window.Algorithmia||{},Algorithmia.api_key="simeyUbLXQ/R8Qga/3ZCRGcr2oR1";var numTasks=0;